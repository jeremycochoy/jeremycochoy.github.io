<!DOCTYPE html>
<html lang="en-us">

  <head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <meta name="description" content="Jeremy Cochoy's personal website.">
  <meta name="author" content="Jeremy Cochoy">

  <title>
    
      GDT et IDT &middot; Jeremy Cochoy
    
  </title>

  <!-- CSS -->
  <link href="/public/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- Custom styles for this template -->
  <link href="/public/style.css" rel="stylesheet">

  <!-- Maths equations -->
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
  });
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>


  <body>

    <!-- Fixed navbar -->
<nav class="navbar navbar-default navbar-fixed-top">
 <div class="container">
   <div class="navbar-header">
     <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
 <span class="sr-only">Toggle navigation</span>
 <span class="icon-bar"></span>
 <span class="icon-bar"></span>
 <span class="icon-bar"></span>
     </button>
     <a class="navbar-brand" href="/">Jeremy Cochoy</a>
   </div>
   <div id="navbar" class="collapse navbar-collapse">
     <ul class="nav navbar-nav">
 <li><a href="/blog/">Blog</a></li>
 <li><a href="/resume/">Resume</a></li>
 <li role="separator" class="divider"></li>
 <li><a href="/research/">Research</a></li>
 <li><a href="/talks/">Talks</a></li>
 <li><a href="/teaching/">Teaching</a></li>
 <li><a href="/music/">Music</a></li>
 <li class="dropdown">
   <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">More <span class="caret"></span></a>
   <ul class="dropdown-menu">
     <li><a href="/hyper-flop/">Hyper-Flop</a></li>
     <li role="separator" class="divider"></li>
     <li><a href="/pdfs/">PDFs & Talks</a></li>
     <li><a href="/agreg-dev/">Agregation de math√©matique</a></li>
     <li role="separator" class="divider"></li>
     <li><a href="https://github.com/jeremycochoy/sednl" alt="SEDNL Github">SEDNL (Github)</a></li>
     <li><a href="http://sednl.zenol.fr" alt="Simple Event Driven Network Library">SEDNL</a></li>
           <li role="separator" class="divider"></li>
           <li><a href="/gb-doc">GameBoy Emulator Documentation</a></li>
   </ul>
 </li>
     </ul>
   </div><!--/.nav-collapse -->
 </div>
</nav>


    <div class="container">
      <div class="post">
  <h1 class="post-title">GDT et IDT</h1>
  <span class="post-date">20 Apr 2009</span>
  <p>Depuis peu, le noyeau que je d√©veloppe dispose enfin d‚Äôune gestion pr√©caire des interruptions.
Dans cette article je vais donc vous parler‚Ä¶ interruptions!
Et histoire de ne perdre personne, on commencera par d√©crire le fonctionnement de la
GDT.</p>

<h2 id="1--physique-ou-virtuelle">1 : Physique ou Virtuelle</h2>

<p>Si vous avez d√©j√† fait un peu d‚Äôassembleur, vous savez peut-√™tre qu‚Äôun programme,
une fois en m√©moire, est diviser en plusieurs segments :</p>

<ul>
  <li>Segment de code</li>
  <li>Segment de donne</li>
  <li>Stack</li>
</ul>

<p>Pour acc√©der a ces diff√©rents segment, on dispose des S√©lecteurs de Segment.
Ce sont des registre qui indiquent √† quel adresse m√©moire situent les donnes.</p>

<p>Ainsi, pour acc√©der a l‚Äô octet num√©ro <code class="highlighter-rouge">0x03</code> du segment de code,
on peut √©crire <code class="highlighter-rouge">cs::0x03</code>.
Quand l‚Äôordinateur d√©marre, le processeur est en mode r√©elle.
C‚Äô est a dire que les s√©lecteurs de segment repr√©sentent une adresse physique.
(<code class="highlighter-rouge">0x73</code> repr√©sente l‚Äô adresse m√©moire <code class="highlighter-rouge">0x730</code>)</p>

<p>Ce n‚Äôest pas vraiment super, tout les programmes ont acc√®s √† toute la m√©moire,
et de plus les registres sont limiter a 16bits‚Ä¶ impossible
d‚Äôacc√®der √† toute la m√©moire des ordinateurs actuel.</p>

<p>Pour r√©gler ce probl√®me, il existe le mode prot√©g√©,
o√π le processeur est en 32Bits et ou les s√©lecteurs correspondent a un maillon
de la GDT (on en reparlera dans quelques lignes).</p>

<p>Dans le mode prot√©ger, la valeur des s√©lecteurs correspond √†
l‚Äôoffset (d√©calage par rapport a l‚Äôorigine) de l‚Äô √©l√©ment dans
la GDT (Global Descriptor Table).
Pour acc√©der au premier s√©lecteur de la GDT, on place donc 0x0 dans
un s√©lecteur de segment.
Pour le second, 0x8 (chaque maillon est sur 64bits), et ainsi de suite.</p>

<h2 id="2-les-interruptions">2: Les interruptions</h2>

<p>Une interruption, c‚Äôest (dixit wikipedia) ‚Äúun arr√™t temporaire de
l‚Äôex√©cution normale d‚Äôun
<a href="http://fr.wikipedia.org/wiki/Programme_informatique">programme informatique</a>
par le <a href="http://fr.wikipedia.org/wiki/Microprocesseur">microprocesseur</a>.</p>

<p>Les interruptions sont de deux type : mat√©riel ou logiciel.</p>

<p>Une interruption mat√©riel est typiquement l‚Äô appuis sur une touche du clavier.
Une interruption logiciel peut √™tre l‚Äô appelle √†
un syscall (un appel √† write sous unix)</p>

<p>Pour associer une fonction(le sens informatique du terme) √† chaque
interruption, il existe l‚Äô IDT(Interrupt Descriptor Table).</p>

<p>Chaque √©l√©ment de l‚Äô IDT contient :</p>

<ul>
  <li>Un s√©lecteur, qui correspond aux √©l√©ments de la GDT</li>
  <li>Un offset (pointeur sur fonction)</li>
  <li>Des bits qui sp√©cifie le TYPE du maillon</li>
</ul>

<h2 id="3--irqs">3 : IRQs</h2>

<p>Et non, ce n‚Äôest pas terminer. C‚Äôest bien beau de configurer la GDT et l‚Äô IDT,
mais encore faut-il configurer le chipset qui s‚Äôoccupe de pr√©venir le processeur
quand une interruption mat√©riel a lieu.
Pour r√©sumer, ce composent envoi une requ√™te (IRQ=Interuption ReQuest)
au processeur quand un √©v√®nement a lieu.
En plus, il n‚Äô est pas un, mais ils sont deux, en cascade (Un esclave et un ma√Ætre).</p>

<p>Une fois le tout configurer, on r√©active les interruption et‚Ä¶
On cherche pourquoi √ßa n‚Äô a pas fonctionner :)</p>

<h3 id="4--r√©f√©rences">4 : R√©f√©rences</h3>

<p>Pour lire un peu de code, vous pouvez jeter un oeil au d√©p√¥t
 git <a href="https://github.com/jeremycochoy/kos/">https://github.com/jeremycochoy/kos/</a>.</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/what-is-wrong-with-the-object-paradigm/">
            What is wrong with the object paradigm ?
            <small>17 Feb 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/boost-property-tree/">
            How to use boost::property_tree to load and write JSON
            <small>21 Dec 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/an-alternative-error-handling-strategy-cpp/">
            An alternative error handling strategy for C++
            <small>27 Aug 2013</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

    </div>

    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-10762787-1', 'auto');
    ga('send', 'pageview');
</script>
    

    <footer class="footer">
  <hr/>
  <div class="container">
    <div class="row">
      <p class="text-muted col-sm-10 text-center">
            <span class="sidebar-nav-item small">Make a donation. üòá</span>
            <span class="sidebar-nav-item x-small">BTC: <a href="bitcoin:1JcME7DSCw8b83nEGFKUYTKE4LM8aX4dhJ">1JcME7DSCw8b83nEGFKUYTKE4LM8aX4dhJ</a></span>
            <span class="sidebar-nav-item x-small">ETH: <a href="ethereum:eA22ADf19f20D618D8EF66E4704C540A10708F1F">eA22ADf19f20D618D8EF66E4704C540A10708F1F</a></span>
      </p>
      <p class="col-sm-2">
        <a class="twitter-share-button col-sm"
           href="https://twitter.com/share"
           data-via="Zenol42">
          Tweet
        </a>
      </p>
    </div>
  </div>
</footer>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/bootstrap/js/vendor/jquery.min.js"><\/script>')</script>
<script src="/public/bootstrap/js/bootstrap.min.js"></script>

<!-- Twitter sharing button loader -->
<script>
  window.twttr = (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
      t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);

    t._e = [];
    t.ready = function(f) {
      t._e.push(f);
    };

    return t;
  }(document, "script", "twitter-wjs"));
</script>

  </body>
</html>
